<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <title>AI-–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –û–±—É—á–µ–Ω–∏—è | Centras Insurance</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2?v=4"></script>
    <script src="/shared/constants.js"></script>
    <!-- Combined and Refactored Styles -->
    <link rel="stylesheet" href="/css/main.css">
</head>
<body>
    <div id="toast-container"></div>
    <div id="global-loader" class="hidden"></div>

    <!-- Auth View (Common for all users) -->
    <div id="auth-view" class="container">
        <div class="window">
            <div class="window-header"><h1>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h1></div>
            <form id="auth-form">
                <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—ã–¥–∞–Ω–Ω—ã–µ –≤–∞–º –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å.</p>
                <input type="email" id="user-email" placeholder="–†–∞–±–æ—á–∏–π Email" required>
                <input type="password" id="user-password" placeholder="–ü–∞—Ä–æ–ª—å" required>
                <div id="auth-error" class="hidden"></div>
                <button type="submit" id="auth-button">–í–æ–π—Ç–∏</button>
            </form>
        </div>
    </div>

    <!-- User App View -->
    <div id="app-view" class="container hidden">
        <div class="window">
             <div class="window-header">
                <h2 id="window-title">–ì–ª–∞–≤–Ω–æ–µ –ú–µ–Ω—é</h2>
                <div class="header-controls">
                    <div id="notifications-bell" style="position: relative; cursor: pointer;">
                        <svg width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M21 19v1H3v-1l2-2v-6c0-3.1 2.03-5.83 5-6.71V4a2 2 0 0 1 2-2a2 2 0 0 1 2 2v.29c2.97.88 5 3.61 5 6.71v6l2 2m-7 2a2 2 0 0 1-2-2h4a2 2 0 0 1-2 2"/></svg>
                        <span id="notifications-badge" class="hidden" style="position: absolute; top: -5px; right: -5px; background: var(--error-color); color: white; border-radius: 50%; width: 18px; height: 18px; font-size: 12px; display: flex; align-items: center; justify-content: center;"></span>
                    </div>
                    <div id="notifications-panel" class="hidden" style="position: absolute; top: 60px; right: 20px; width: 300px; background: var(--surface-color); border: 1px solid var(--border-color); border-radius: 8px; box-shadow: var(--shadow); z-index: 100;">
                        <div style="padding: 10px; border-bottom: 1px solid var(--border-color); font-weight: bold;">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
                        <div id="notifications-list" style="max-height: 300px; overflow-y: auto;"></div>
                    </div>
                </div>
                 <img src="https://centras.kz/wp-content/uploads/2023/12/centras-insurance-col.png" alt="Logo" class="logo">
                <div id="leaderboard-container">
                    <h3><i class="fa-solid fa-trophy"></i> –¢–æ–ø –£—á–µ–Ω–∏–∫–æ–≤ –ù–µ–¥–µ–ª–∏</h3>
                    <div id="leaderboard-content"></div>
                </div>
                 <button id="logout-btn" style="background: transparent; border: none; cursor: pointer; font-size: 1.5em; margin-left: 20px;" title="–í—ã–π—Ç–∏"><i class="fa-solid fa-right-from-bracket"></i></button>
            </div>
            <div id="content-loader" class="hidden" style="display: flex; justify-content: center; align-items: center; height: 60vh;"><div class="loader"></div></div>
            <div class="content-area" id="content-area">
                <div id="main-flex-container" style="display: flex;">
                    <div id="main-content-wrapper" style="flex: 1;">
                        <div class="search-container">
                            <i class="fa-solid fa-search"></i>
                            <input type="text" id="course-search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏—é...">
                        </div>
                        <div id="main-menu-tabs">
                            <button class="tab-btn active" data-filter="assigned">üì• –ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ</button>
                            <button class="tab-btn" data-filter="completed">‚úÖ –ü—Ä–æ–π–¥–µ–Ω–Ω—ã–µ</button>
                            <button class="tab-btn" data-filter="catalog">üìö –ö–∞—Ç–∞–ª–æ–≥</button>
                        </div>
                        <div id="main-menu"></div>
                        <div id="extra-tools" style="padding-top: 20px; border-top: 1px solid #eee;">
                            <button id="launch-simulator-btn">–î–∏–∞–ª–æ–≥–æ–≤—ã–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä</button>
                        </div>
                        <div id="product-content" class="hidden"></div>
                    </div>
                </div>
                <div id="test-view" class="hidden">
                    <!-- Test view content -->
                </div>
                <div id="test-results" class="hidden">
                    <!-- Test results content -->
                </div>
                <div id="simulator-view" class="hidden">
                    <!-- Simulator content -->
                </div>
            </div>
            <div class="window-footer">
                <button id="back-to-menu-btn" class="hidden">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
            </div>
        </div>
    </div>

    <!-- Admin Panel View -->
    <div id="panel-view" class="container hidden">
         <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border-color); padding-bottom: 15px; margin-bottom: 15px;">
            <div style="display: flex; align-items: center; gap: 20px;">
                <img src="https://centras.kz/wp-content/uploads/2023/12/centras-insurance-col.png" alt="Logo" style="height: 40px;">
                <h1>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h1>
            </div>
            <button id="admin-logout-btn" style="width: auto; background-color: var(--text-light-color);">–í—ã–π—Ç–∏</button>
        </div>
        <div class="tabs">
            <button id="courses-tab-btn" class="active">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞–º–∏</button>
            <button id="groups-tab-btn">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏</button>
            <button id="results-tab-btn">–û—Ç—á–µ—Ç—ã –∏ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
            <button id="leaderboard-tab-btn">–õ–∏–¥–µ—Ä–±–æ—Ä–¥</button>
            <button id="simulator-tab-btn">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¢—Ä–µ–Ω–∞–∂–µ—Ä–∞</button>
        </div>
        <hr>

        <div id="courses-view">
            <!-- Admin courses view content -->
        </div>

        <div id="groups-view" class="hidden">
            <!-- Admin groups view content -->
        </div>

        <div id="results-view" class="hidden">
            <!-- Admin results view content -->
        </div>
        <div id="leaderboard-view" class="hidden">
            <!-- Admin leaderboard view content -->
        </div>
        <div id="simulator-results-view" class="hidden">
            <!-- Admin simulator results view content -->
        </div>
    </div>

    <!-- External Scripts -->
    <script src="/public/js/api.js"></script>
    <script src="/public/js/app.js"></script>
    <script src="/public/js/admin.js"></script>
</body>
</html>