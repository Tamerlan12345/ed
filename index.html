<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <title>AI-Платформа Обучения | Centras Insurance</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap');
        :root{--primary-color:#005A9C;--secondary-color:#00AEEF;--bg-color:#f4f7f6;--surface-color:#ffffff;--text-color:#333333;--text-light-color:#777777;--border-color:#e0e0e0;--success-color:#28a745;--error-color:#dc3545;--shadow:0 4px 15px rgba(0,0,0,0.08)}*{box-sizing:border-box}body,html{height:100%;margin:0;background-color:var(--bg-color);color:var(--text-color);font-family:'Lato',sans-serif;font-size:16px}.hidden{display:none !important}.container{width:100%;height:100%;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center}.window{border:1px solid var(--border-color);padding:30px;box-shadow:var(--shadow);background:var(--surface-color);border-radius:12px;width:100%;max-width:1300px;position:relative}.window-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border-color);padding-bottom:15px;margin-bottom:25px}.window-header h1,.window-header h2{margin:0;font-size:1.8em;color:var(--primary-color);font-weight:700}.logo{height:45px;width:auto}.content-area{height:60vh;overflow-y:auto;padding-right:15px}.content-area::-webkit-scrollbar{width:8px}.content-area::-webkit-scrollbar-track{background:#f1f1f1}.content-area::-webkit-scrollbar-thumb{background:var(--secondary-color);border-radius:4px}.content-area::-webkit-scrollbar-thumb:hover{background:var(--primary-color)}input[type="text"],input[type="email"],input[type="password"]{background-color:var(--bg-color);border:1px solid var(--border-color);color:var(--text-color);padding:12px 15px;margin-bottom:15px;width:100%;font-family:'Lato',sans-serif;border-radius:12px;transition:border-color .3s,box-shadow .3s}input:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px rgba(0,90,166,0.2)}button,.btn{background:var(--primary-color);border:none;color:#fff;padding:12px 25px;cursor:pointer;transition:all .3s ease;box-shadow:0 2px 8px rgba(0,0,0,0.1);border-radius:12px;font-weight:700;font-family:'Lato',sans-serif;letter-spacing:.2px;margin-top:10px}button:hover,.btn:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,90,166,0.2);background:var(--secondary-color)}button:disabled{background:var(--text-light-color);cursor:not-allowed;transform:none;box-shadow:none}#auth-error{color:var(--error-color);margin-top:10px;text-align:center;font-weight:bold}#main-menu{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px}.menu-item{padding:16px;border:1px solid var(--border-color);border-radius:12px;cursor:pointer;transition:all .3s ease;background-color:var(--surface-color)}.menu-item:hover{transform:translateY(-5px);box-shadow:var(--shadow);border-color:var(--primary-color)}.menu-item h3{margin-top:0;color:var(--primary-color);display:flex;align-items:center}.menu-item-icon{font-size:1.5em;margin-right:15px;color:var(--secondary-color)}.menu-item.completed{border-left:5px solid var(--success-color)}.menu-item.completed h3{color:var(--success-color)}.menu-item.completed::after{content:'✓ Завершено';color:var(--success-color);font-size:.8em;font-weight:bold;display:block;margin-top:10px}#product-content h2,#product-content h3{color:var(--primary-color)}#product-content h3{border-bottom:2px solid var(--secondary-color);padding-bottom:5px;margin-top:25px}#product-content ul{list-style-type:'✓ ';padding-left:20px}#product-content li{padding-left:10px;margin-bottom:10px}#test-view .question{margin-bottom:20px;font-size:1.3em;font-weight:bold;color:var(--primary-color)}#test-view .answers{display:flex;flex-direction:column;gap:10px}#test-view .answer{border:2px solid var(--border-color);padding:15px;cursor:pointer;border-radius:12px;transition:all .2s ease-in-out}#test-view .answer:hover{background-color:#e9f7fe;border-color:var(--secondary-color)}#test-results p{font-size:1.2em}#test-results .score{color:var(--primary-color);font-weight:bold;font-size:2em}.window-footer{margin-top:20px;border-top:1px solid var(--border-color);padding-top:20px;display:flex;justify-content:space-between;align-items:center}#back-to-menu-btn{background:var(--text-light-color)}#back-to-menu-btn:hover{background:#555;box-shadow:0 4px 10px rgba(0,0,0,0.2)}.loader{width:50px;height:50px;border:5px solid var(--bg-color);border-top-color:var(--primary-color);border-radius:50%;animation:spin 1s linear infinite;margin:50px auto}.message{text-align:center;padding:20px;font-size:1.1em;color:var(--text-light-color)}@keyframes spin{to{transform:rotate(360deg)}}#assistant-container{margin-top:30px;padding-top:20px;border-top:1px dashed var(--border-color)}#assistant-container h3{color:var(--primary-color);margin-top:0}#chat-box{height:150px;overflow-y:auto;border:1px solid var(--border-color);border-radius:12px;padding:10px;margin-bottom:10px;background-color:var(--bg-color)}.chat-message{margin-bottom:10px}.user-message{text-align:right}.assistant-message span{background-color:#e9f7fe;padding:5px 10px;border-radius:10px;display:inline-block}.thinking{color:var(--text-light-color);font-style:italic}#chat-form{display:flex;gap:10px}#chat-input{flex-grow:1;margin:0}#chat-form button{margin:0}#admin-controls{text-align:right;margin-bottom:15px}
    </style>
    <style>
        /* Card UI Overrides for .menu-item */
        .menu-item {
            border: 1px solid var(--border-color);
            border-radius: 12px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .menu-item:hover {
            transform: translateY(-4px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }
        .course-group-container {
            background-color: var(--surface-color);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
        }
        .course-group-container h3 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
            margin-top: 0;
        }
        .skeleton-card { background-color: #e0e0e0; border-radius: 12px; height: 150px; position: relative; overflow: hidden; }
        .skeleton-card::after { content: ''; position: absolute; top: 0; left: -150%; width: 150%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent); animation: shimmer 1.5s infinite; }
        @keyframes shimmer { 0% { left: -150%; } 100% { left: 150%; } }
    </style>
    <style>
        #main-menu-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            border-bottom: none !important;
        }
        .tab-btn {
            padding: 8px 20px;
            border: none;
            background-color: transparent;
            cursor: pointer;
            font-size: 1em;
            color: var(--text-light-color);
            border-radius: 20px; /* pill shape */
            transition: all 0.2s ease-in-out;
            font-weight: 600;
            margin: 0;
        }
        .tab-btn.active {
            color: white;
            background-color: var(--primary-color);
            box-shadow: 0 2px 8px rgba(0, 90, 166, 0.2);
        }
        .tab-btn:not(.active):hover {
           background-color: #e9ecef;
           color: var(--primary-color);
        }
    </style>
    <style id="presentation-styles">
        #app-view.presentation-mode-active #main-menu-tabs,
        #app-view.presentation-mode-active #main-menu,
        #app-view.presentation-mode-active #extra-tools,
        #app-view.presentation-mode-active #leaderboard-container,
        #app-view.presentation-mode-active #back-to-menu-btn,
        #app-view.presentation-mode-active .window-footer {
            display: none;
        }
        #app-view.presentation-mode-active #product-content {
            display: block;
            height: 100%;
        }
        #app-view.presentation-mode-active #main-flex-container {
            display: block;
        }
        #app-view.presentation-mode-active #main-content-wrapper {
             flex: 1 1 100%;
        }
        #app-view.presentation-mode-active .content-area {
            padding: 0;
        }
        .presentation-view-container {
            display: flex;
            gap: 20px;
            background-color: var(--bg-color);
            height: 100%;
            padding: 20px;
            opacity: 0;
            animation: fadeIn .4s ease-in-out forwards;
        }
        .presentation-view-left-sidebar {
            flex: 0 0 clamp(220px, 22vw, 280px);
            display: flex;
            flex-direction: column;
            gap: 15px; /* Reduced gap */
        }
        .presentation-view-right-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--surface-color);
            border-radius: 12px;
            box-shadow: var(--shadow);
            padding: 20px 25px; /* Reduced padding */
            overflow: hidden;
        }
        .sidebar-panel {
            padding: 15px; /* Reduced padding */
        }
        #chat-box-sidebar {
            font-size: 0.85em; /* Smaller font in chat */
        }
        .presentation-slide h2 {
            font-size: clamp(1em, 2.2vw, 1.3em);
        }
        .presentation-slide {
            font-size: clamp(0.75em, 1.8vw, 0.85em);
        }
        .sidebar-panel {
            background: var(--surface-color);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border: 1px solid var(--border-color);
        }
        .sidebar-panel h3 {
            margin-top: 0;
            font-size: 1.0em;
            font-weight: bold;
            color: var(--text-color);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .instruments-panel button {
            width: 100%;
            background-color: var(--primary-color);
            font-size: 0.95em;
        }
        .chatbot-panel {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        #chat-box-sidebar {
            height: 40vh;
            overflow-y: auto;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
            background-color: var(--bg-color);
            font-size: 0.9em;
        }
        #chat-form-sidebar { display: flex; gap: 5px; }
        #chat-input-sidebar { flex-grow: 1; margin: 0; font-size: 0.9em; }
        #chat-form-sidebar button { margin: 0; padding: 8px 12px; background-color: var(--primary-color); }
        #back-to-course-btn-sidebar {
            width: 100%;
            background: transparent;
            border: 1px solid var(--text-light-color);
            color: var(--text-light-color);
            margin-top: auto;
        }
        #back-to-course-btn-sidebar:hover { background: var(--text-light-color); color: white; }
        .presentation-slider-container {
            flex-grow: 1;
            overflow-y: auto;
            padding-right: 15px;
        }
        .slider-nav-buttons {
            padding-top: 15px;
            margin-top: auto;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            flex-shrink: 0;
        }
        .slider-nav-buttons button {
            background: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            font-weight: bold;
            padding: 6px 16px;
            border-radius: 6px;
            font-size: 0.9em;
        }
        .slider-nav-buttons button:hover {
            background: var(--primary-color);
            color: white;
        }
        .slider-nav-buttons button:disabled {
            border-color: #ccc;
            color: #ccc;
            background: transparent;
            cursor: not-allowed;
        }
        .presentation-slide { display: none; }
        .presentation-slide.active {
            display: flex;
            flex-direction: column;
            height: 100%;
            animation: fadeInSlide .5s;
        }
        .presentation-slide img {
            max-width: 100%;
            max-height: 35vh;
            object-fit: contain;
            flex-shrink: 0;
            margin-bottom: 1rem;
            border-radius: 8px;
            align-self: center;
        }
        .presentation-slide-content {
            flex-grow: 1;
            overflow-y: auto;
            padding-right: 10px;
        }
        @keyframes fadeInSlide {
            from { opacity: 0.3; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @media (max-width: 992px) {
            .presentation-view-container {
                flex-direction: column;
                padding: 10px;
                height: auto;
            }
            .presentation-view-left-sidebar {
                flex: 1 1 auto;
                width: 100%;
            }
            .presentation-view-right-content {
                padding: 15px;
            }
        }
        @media (max-height: 750px) {
            .presentation-view-right-content {
                padding: 15px 20px;
            }
            .presentation-slide h2 {
                font-size: clamp(0.9em, 2vw, 1.2em);
            }
            .presentation-slide {
                font-size: clamp(0.7em, 1.6vw, 0.8em);
            }
            .presentation-slide img {
                max-height: 30vh;
                margin-bottom: 0.5rem;
            }
            .slider-nav-buttons {
                padding-top: 10px;
            }
        }
        @media (max-height: 650px) {
            .presentation-view-right-content {
                padding: 10px 15px;
            }
            .presentation-slide h2 {
                font-size: clamp(0.8em, 1.8vw, 1em);
            }
            .presentation-slide {
                font-size: clamp(0.65em, 1.4vw, 0.75em);
            }
            .presentation-slide img {
                max-height: 25vh;
                margin-bottom: 0.25rem;
            }
            .slider-nav-buttons {
                padding-top: 5px;
                gap: 5px;
            }
             .slider-nav-buttons button {
                padding: 4px 12px;
                font-size: 0.8em;
            }
        }
    </style>
    <style>
        /* Toast Notifications */
        #toast-container { position: fixed; top: 20px; right: 20px; z-index: 1050; }
        .toast { padding: 15px 20px; margin-bottom: 10px; border-radius: 8px; color: white; font-weight: bold; box-shadow: 0 4px 15px rgba(0,0,0,0.1); opacity: 0; width: 300px; transform: translateX(100%); transition: all 0.4s ease-in-out; }
        .toast.show { opacity: 0.9; transform: translateX(0); }
        .toast-error { background-color: #dc3545; }
        .toast-success { background-color: #28a745; }
        .toast-info { background-color: #00AEEF; }
    </style>
    <style id="jules-layout-fixes">
        .main-menu-columns {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            align-items: flex-start;
        }
        .courses-column > h3 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
            margin-bottom: 15px;
        }
        .individual-courses-column {
             background-color: var(--surface-color);
             border-radius: 12px;
             padding: 20px;
             box-shadow: var(--shadow);
        }
        .individual-courses-column > h3 {
            margin-top: 0;
        }
    </style>
    <style id="jules-layout-fixes-2">
        body, html {
            overflow: hidden !important;
        }
        .window {
            display: flex;
            flex-direction: column;
            height: 100%;
            padding-top: 20px;
            padding-bottom: 20px;
        }
        .window-header {
            flex-shrink: 0;
            margin-bottom: 20px;
        }
        .content-area {
            flex-grow: 1;
            min-height: 0;
            height: auto !important; /* Override 60vh */
            overflow-y: auto !important;
        }
        .window-footer {
            flex-shrink: 0;
        }
        #grouped-courses-container {
            display: block; /* Make groups stack vertically */
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2?v=4"></script>
    <style id="layout-override">
        /* --- Jules's Card & Layout Styles --- */
        .search-container {
            position: relative;
            margin-bottom: 20px;
        }
        .search-container .fa-search {
            position: absolute;
            top: 50%;
            left: 15px;
            transform: translateY(-50%);
            color: var(--text-light-color);
        }
        #course-search-input {
            padding-left: 40px;
            width: 100%;
        }
        #main-menu, .main-menu {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        .menu-item {
            padding: 16px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .menu-item h3 {
            font-size: 1.05em;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
        }
        .menu-item-icon {
            font-size: 1.2em;
            margin-right: 12px;
            width: 1.2em;
            text-align: center;
            flex-shrink: 0;
        }
        .menu-item-description {
            font-size: 0.85em;
            color: var(--text-light-color);
            margin: 5px 0 10px 0;
            line-height: 1.4;
        }
        /* --- End of Jules's Fixes --- */

        .window-header {
            position: sticky;
            top: 0;
            background: var(--surface-color);
            z-index: 10;
        }
    </style>
    <style id="course-materials-style">
        .course-materials-container h3 {
            font-size: 1.1em;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        .course-materials-list {
            list-style-type: none;
            padding-left: 0;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 10px;
        }
        .material-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 8px;
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            text-decoration: none;
            transition: all 0.2s ease;
            font-weight: 500;
        }
        .material-link:hover {
            border-color: var(--primary-color);
            background-color: #e9f7fe;
            color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.07);
        }
    </style>
    <style id="leaderboard-header-styles">
        .window-header {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .window-header .logo {
            order: -2; /* Comes first */
        }
        .window-header #window-title {
            order: -1; /* Comes second */
            margin-right: auto; /* Pushes everything else to the right */
        }
        #leaderboard-container {
            flex-shrink: 0;
            min-width: 250px; /* Prevent it from getting too small */
            max-width: 350px;
            background-color: transparent;
            padding: 0;
            border: none;
            align-self: center;
        }
        #leaderboard-container h3 {
            font-size: 0.9em;
            margin-bottom: 5px;
            white-space: nowrap;
        }
        #leaderboard-content {
            font-size: 0.8em;
            max-height: 50px; /* Adjust as needed */
            overflow-y: auto;
        }
        #leaderboard-content ol {
            padding-left: 20px;
            margin: 0;
        }
        #leaderboard-content li {
            margin-bottom: 2px;
        }
        .header-controls {
            margin-left: auto; /* Push to the far right */
            order: 2;
        }
        #logout-btn {
            order: 3;
        }
    </style>
</head>
<body>
    <div id="toast-container"></div>
    <div id="auth-view" class="container">
        <div class="window">
            <div class="window-header"><h1>Вход в систему</h1></div>
            <form id="auth-form">
                <p>Пожалуйста, используйте выданные вам логин и пароль.</p>
                <input type="email" id="user-email" placeholder="Рабочий Email" required>
                <input type="password" id="user-password" placeholder="Пароль" required>
                <div id="auth-error" class="hidden"></div>
                <button type="submit" id="auth-button">Войти</button>
            </form>
        </div>
    </div>
    <div id="app-view" class="container hidden">
        <div class="window">
             <div class="window-header">
                <h2 id="window-title">Главное Меню</h2>
                <div class="header-controls">
                    <div id="notifications-bell" style="position: relative; cursor: pointer;">
                        <svg width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M21 19v1H3v-1l2-2v-6c0-3.1 2.03-5.83 5-6.71V4a2 2 0 0 1 2-2a2 2 0 0 1 2 2v.29c2.97.88 5 3.61 5 6.71v6l2 2m-7 2a2 2 0 0 1-2-2h4a2 2 0 0 1-2 2"/></svg>
                        <span id="notifications-badge" class="hidden" style="position: absolute; top: -5px; right: -5px; background: var(--error-color); color: white; border-radius: 50%; width: 18px; height: 18px; font-size: 12px; display: flex; align-items: center; justify-content: center;"></span>
                    </div>
                    <div id="notifications-panel" class="hidden" style="position: absolute; top: 60px; right: 20px; width: 300px; background: var(--surface-color); border: 1px solid var(--border-color); border-radius: 8px; box-shadow: var(--shadow); z-index: 100;">
                        <div style="padding: 10px; border-bottom: 1px solid var(--border-color); font-weight: bold;">Уведомления</div>
                        <div id="notifications-list" style="max-height: 300px; overflow-y: auto;"></div>
                    </div>
                </div>
                 <img src="https://centras.kz/wp-content/uploads/2023/12/centras-insurance-col.png" alt="Logo" class="logo">
                <div id="leaderboard-container">
                    <h3><i class="fa-solid fa-trophy"></i> Топ Учеников Недели</h3>
                    <div id="leaderboard-content"></div>
                </div>
                 <button id="logout-btn" style="background: transparent; border: none; cursor: pointer; font-size: 1.5em; margin-left: 20px;" title="Выйти"><i class="fa-solid fa-right-from-bracket"></i></button>
            </div>
            <div id="content-loader" class="hidden" style="display: flex; justify-content: center; align-items: center; height: 60vh;"><div class="loader"></div></div>
            <div class="content-area" id="content-area">
                <div id="main-flex-container" style="display: flex;">
                    <div id="main-content-wrapper" style="flex: 1;">
                        <div class="search-container">
                            <i class="fa-solid fa-search"></i>
                            <input type="text" id="course-search-input" placeholder="Поиск по названию или описанию...">
                        </div>
                        <div id="main-menu-tabs">
                            <button class="tab-btn active" data-filter="assigned">📥 Назначенные</button>
                            <button class="tab-btn" data-filter="completed">✅ Пройденные</button>
                            <button class="tab-btn" data-filter="catalog">📚 Каталог</button>
                        </div>
                        <div id="main-menu"></div>
                        <div id="extra-tools" style="padding-top: 20px; border-top: 1px solid #eee;">
                            <button id="launch-simulator-btn">Диалоговый тренажер</button>
                        </div>
                        <div id="admin-controls" class="hidden"></div>
                        <div id="product-content" class="hidden"></div>
                        <div id="audio-player-container-user" style="margin-top: 15px;"></div>
                    </div>
                </div>
                <div id="test-view" class="hidden">
                    <button id="back-to-presentation-from-test" style="background-color: #6c757d; float: right;">Назад к материалам</button>
                    <p id="question-counter"></p>
                    <div id="question" class="question"></div>
                    <div id="answers" class="answers"></div>
                    <button id="next-question-btn" class="hidden">Следующий вопрос</button>
                </div>
                <div id="test-results" class="hidden" style="text-align: center;">
                    <div style="font-size: 4em; color: var(--success-color);"><i class="fa-solid fa-trophy"></i></div>
                    <h2>Результаты тестирования</h2>
                    <p>Курс: <b id="results-product-name"></b></p>
                    <p>Ваш результат: <span id="results-score" class="score"></span></p>
                    <div style="display: flex; justify-content: center; gap: 30px; margin: 20px 0;">
                        <div>
                            <p style="margin: 0; color: var(--text-light-color);">Попыток</p>
                            <p style="margin: 0; font-size: 1.5em; font-weight: bold;" id="results-attempts"></p>
                        </div>
                        <div>
                            <p style="margin: 0; color: var(--text-light-color);">Затрачено времени</p>
                            <p style="margin: 0; font-size: 1.5em; font-weight: bold;" id="results-time-spent"></p>
                        </div>
                    </div>
                    <p id="results-feedback" style="font-style: italic;"></p>
                    <div id="results-buttons" style="margin-top: 25px; display: flex; justify-content: center; gap: 15px;">
                        <button id="back-to-menu-from-results" class="btn">Вернуться в меню</button>
                        <button id="retry-test-btn" class="btn hidden" style="background-color: transparent; border: 1px solid var(--primary-color); color: var(--primary-color);">Пройти заново</button>
                    </div>
                </div>
                <div id="simulator-view" class="hidden">
                    <div id="simulator-setup">
                        <h3>Настройка тренажера</h3>
                        <div style="margin-bottom: 20px;">
                            <label for="disposition-slider" style="display: block; margin-bottom: 10px; font-weight: bold;">1. Выберите настроение клиента:</label>
                            <input type="range" id="disposition-slider" min="0" max="2" value="1" style="width: 100%;">
                            <div style="display: flex; justify-content: space-between; font-size: 0.9em; color: var(--text-light-color);">
                                <span>Холодный</span>
                                <span>Нейтральный</span>
                                <span>Горячий</span>
                            </div>
                        </div>
                        <button id="start-simulation-btn">Начать диалог</button>
                    </div>
                    <div id="simulator-chat-area" class="hidden">
                        <div id="simulator-chat-box" style="height: 45vh; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px; padding: 10px; margin-bottom: 10px; background-color: var(--bg-color);"></div>
                        <form id="simulator-chat-form" style="display: flex; gap: 10px;">
                            <input type="text" id="simulator-chat-input" placeholder="Ваш ответ..." autocomplete="off" style="flex-grow: 1; margin: 0;">
                            <button type="submit" id="simulator-submit-btn">Отправить</button>
                        </form>
                        <button id="end-simulation-btn" style="margin-top: 10px; background-color: var(--error-color);">Завершить и получить оценку</button>
                    </div>
                    <div id="simulator-evaluation-area" class="hidden">
                        <h3>Оценка диалога</h3>
                        <div id="evaluation-results" style="white-space: pre-wrap; background-color: var(--bg-color); padding: 15px; border-radius: 8px;"></div>
                        <button id="restart-simulation-btn" style="margin-top: 10px;">Начать заново</button>
                    </div>
                </div>
            </div>
            <div class="window-footer">
                <button id="back-to-menu-btn" class="hidden">Назад в меню</button>
            </div>
        </div>
    </div>
<script type="module" src="/client/user.js"></script>

<template id="course-menu-item-template">
    <div class="menu-item">
        <div>
            <h3><span class="menu-item-icon"></span><span class="course-title"></span></h3>
        </div>
        <div>
            <div class="progress-bar"></div>
            <div class="deadline"></div>
        </div>
    </div>
</template>

<template id="catalog-menu-item-template">
     <div class="menu-item">
        <div>
            <h3><span class="menu-item-icon"></span><span class="course-title"></span></h3>
        </div>
        <div class="course-actions" style="margin-top: 10px;"></div>
    </div>
</template>

</body>
</html>
