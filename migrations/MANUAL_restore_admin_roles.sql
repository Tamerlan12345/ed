--! Этот скрипт предназначен для РУЧНОГО выполнения администратором базы данных.
--! Он НЕ является частью автоматического процесса миграции.
--!
--! Назначение: Восстановление флага is_admin для пользователей, которые
--! потеряли права администратора из-за рассинхронизации данных.
--!
--! Инструкция:
--! 1. Замените плейсхолдеры ('admin1@example.com', 'admin2@example.com')
--!    на реальные email-адреса администраторов, которым нужно восстановить доступ.
--! 2. Выполните этот SQL-запрос в вашем редакторе Supabase или любом
--!    другом инструменте для работы с PostgreSQL.

UPDATE public.users
SET is_admin = TRUE
WHERE email IN (
  'admin1@example.com',
  'admin2@example.com'
  -- Добавьте сюда другие email, если необходимо, через запятую
);

SELECT email, is_admin FROM public.users WHERE email IN (
  'admin1@example.com',
  'admin2@example.com'
);
-- Последний запрос выведет обновленные данные для проверки.
